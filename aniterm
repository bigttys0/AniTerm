#!/bin/bash
# NAME:        AniTerm
# AUTHOR:      Kristoffer Marshall (marshall.kris@gmail.com)
# DESCRIPTION: This program displays frames most likely generated by "Fabulous"
#  to display an animation in a Linux console window.
#
# REQUIRED:
#  * Standard GNU environment (ie. Linux)
#
# OPTIONAL:
#  * Fabulous (https://github.com/jart/fabulous)
#
# TODO:
#  * Better comments
#  * An error handler
#  * Handle arguments better for scalability (http://stackoverflow.com/questions/192249/how-do-i-parse-command-line-arguments-in-bash)
#  * Integrate with Fabulous to process animated gifs into frames
#  * A random option to show a random animation when executed
#  * An install script
#  * A default animation
#  * Make a webpage that creates animated ASCII frames

FRAMESDIR=$HOME/.aniterm

# Defaults
loops=3
timeout=.1

# Flag processing
case "$#" in
   0) echo "Usage: aniterm [loop_times] [timeout seconds] DIRECTORY_OF_FRAMES"
      echo "Default loop_times: 3"
      echo "Default timeout: .1"
      exit 1
   ;;
   1) animationDir=$1
   ;;
   2) loops=$1
      animationDir=$2
   ;;
   3) loops=$1
      timeout=$2
      animationDir=$3
   ;;
esac


# Go to the frames directory
cd $FRAMESDIR/$animationDir

# Until we hit how many loops we need
until [ $iteration -eq $loops ]; do
	for x in $(ls -1v *.frame); do
		clear
		cat $x # MAGIC
		sleep $timeout
	done
	((iteration++))
done
